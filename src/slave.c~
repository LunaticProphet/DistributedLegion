#include "def.h"
#include "common.h"
#include "stage1.h"

void handle(msg *m){
	handle_req_acc_rel(m);
}

void asd(int road, int prev){
	sprintf(buf, "CS ON ROAD %i", road); lg();
	sprintf(buf, "PREVIOUS IN CS: %i",prev); lg();
	sleepForMax(1000);
	sprintf(buf, "CS OUT OF ROAD %i", road); lg();
}


///////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////

int main()
{
	init();
	stage1_init();

	stage1_enter_cs(0, asd, handle);
	stage1_enter_cs(1, asd, handle);
		


	sprintf(buf, "finished"); lg();
	pvm_exit();
}
